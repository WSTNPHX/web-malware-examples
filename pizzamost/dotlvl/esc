#!/bin/bash

B=$1
#IFS=$'\n'
count=0
blankLine=" "
CONTOR=0
total=`wc -l $1`
while read line; do

CONTOR=`ps x | grep -c httpd`
while [ $CONTOR -ge 2000 ];do
CONTOR=`ps x | grep -c httpd`
sleep 8
done
if [ $CONTOR -le 2000 ]; then
let count=count+1
./tty $line $2
echo -n -e "\e[1;33;1m\r$blankLine\r\e[0m"
echo -n -e "\e[1;37;1m[\e[1;32;1m+\e[1;37;1m]SMTP: $count of $total @brute\e[0m"
fi
done < $B
echo -n -e "\e[1;33;1m\r$blankLine\r\e[0m"
echo -n -e "\e[1;37;1m[\e[1;32;1m+\e[1;37;1m]FOUND $count servers..\e[0m\n"
